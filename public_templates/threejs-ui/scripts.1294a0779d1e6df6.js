class AlephScriptFrontendClient{constructor(e){this.config={reconnection:!0,reconnectionAttempts:5,debug:!1,...e},this.roomName=`${this.config.uiType}_${this.config.uiId}_ROOM`,this.isConnected=!1,this.eventHandlers=new Map,this.initialize()}initialize(){this.socket=io(this.config.serverUrl,{reconnection:this.config.reconnection,reconnectionAttempts:this.config.reconnectionAttempts,transports:["websocket","polling"]}),this.setupEventHandlers()}setupEventHandlers(){this.socket.on("connect",()=>{this.isConnected=!0,this.log("\u{1f50c} Connected to AlephScript server"),this.socket.emit("join_room",{room:this.roomName}),this.emit("connected",{roomName:this.roomName})}),this.socket.on("disconnect",()=>{this.isConnected=!1,this.log("\u{1f50c} Disconnected from AlephScript server"),this.emit("disconnected",{})}),this.socket.on("connect_error",e=>{this.log("\u274c Connection error:",e),this.emit("connection_error",{error:e.message})}),this.socket.on("ui_message",e=>{this.log("\u{1f4e8} Received message:",e),this.emit("message",e)}),this.socket.on("agent_message",e=>{this.log("\u{1f916} Received agent message:",e),this.emit("agent_message",e)}),this.socket.on("system_message",e=>{this.log("\u{1f527} Received system message:",e),this.emit("system_message",e)}),this.socket.on("agent_postulations",e=>{this.log("\u{1f3ad} Received agent postulations:",e),this.emit("agent_postulations",e)}),this.socket.on("agent_selection_result",e=>{this.log("\u2705 Agent selection result:",e),this.emit("agent_selection_result",e)}),this.socket.on("game_state_update",e=>{this.log("\u{1f4ca} Game state update:",e),this.emit("game_state_update",e)}),this.socket.on("phase_change",e=>{this.log("\u{1f504} Phase change:",e),this.emit("phase_change",e)}),this.socket.on("notification",e=>{this.log("\u{1f4e2} Notification:",e),this.emit("notification",e)}),this.socket.on("error_message",e=>{this.log("\u274c Error message:",e),this.emit("error_message",e)}),this.socket.on("heartbeat",e=>{this.log("\u{1f493} Heartbeat:",e),this.emit("heartbeat",e),this.socket.emit("heartbeat_response",{timestamp:Date.now(),room:this.roomName})})}sendUserInput(e,t={}){this.socket.emit("user_input",{input:e,metadata:t,timestamp:Date.now(),room:this.roomName}),this.log("\u{1f4e4} Sent user input:",e)}selectAgent(e,t=""){this.socket.emit("agent_selection",{agentIndex:e,reasoning:t,timestamp:Date.now(),room:this.roomName}),this.log("\u{1f446} Selected agent:",e)}requestPostulations(e={}){this.socket.emit("request_postulations",{context:e,timestamp:Date.now(),room:this.roomName}),this.log("\u{1f3ad} Requested postulations")}sendGameAction(e,t={}){this.socket.emit("game_action",{action:e,payload:t,timestamp:Date.now(),room:this.roomName}),this.log("\u{1f3ae} Sent game action:",e)}requestGameState(){this.socket.emit("request_game_state",{timestamp:Date.now(),room:this.roomName}),this.log("\u{1f4ca} Requested game state")}sendHeartbeat(){this.socket.emit("client_heartbeat",{timestamp:Date.now(),room:this.roomName,uiType:this.config.uiType})}on(e,t){this.eventHandlers.has(e)||this.eventHandlers.set(e,[]),this.eventHandlers.get(e).push(t)}off(e,t){const s=this.eventHandlers.get(e);if(s){const i=s.indexOf(t);i>-1&&s.splice(i,1)}}emit(e,t){const s=this.eventHandlers.get(e);s&&s.forEach(i=>{try{i(t)}catch(n){this.log("\u274c Error in event handler:",n)}})}connect(){this.isConnected||this.socket.connect()}disconnect(){this.isConnected&&this.socket.disconnect()}isSocketConnected(){return this.isConnected&&this.socket.connected}getRoomName(){return this.roomName}getStatus(){return{connected:this.isConnected,roomName:this.roomName,uiType:this.config.uiType,uiId:this.config.uiId}}log(...e){this.config.debug&&console.log(`[AlephScript-${this.config.uiType.toUpperCase()}]`,...e)}destroy(){this.eventHandlers.clear(),this.socket&&this.socket.disconnect()}}function createAlephScriptClient(o,e,t="http://localhost:3000",s={}){return new AlephScriptFrontendClient({serverUrl:t,uiId:e,uiType:o,debug:!0,...s})}typeof module<"u"&&module.exports?module.exports={AlephScriptFrontendClient,createAlephScriptClient}:typeof window<"u"&&(window.AlephScriptFrontendClient=AlephScriptFrontendClient,window.createAlephScriptClient=createAlephScriptClient);